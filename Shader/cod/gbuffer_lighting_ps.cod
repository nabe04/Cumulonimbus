//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer CameraCB
// {
//
//   float4x4 camera_view_matrix;       // Offset:    0 Size:    64 [unused]
//   float4x4 camera_projection_matrix; // Offset:   64 Size:    64 [unused]
//   float4x4 camera_view_projection_matrix;// Offset:  128 Size:    64 [unused]
//   float4x4 camera_inv_view_matrix;   // Offset:  192 Size:    64 [unused]
//   float4x4 camera_inv_projection_matrix;// Offset:  256 Size:    64 [unused]
//   float4x4 camera_inv_view_projection_matrix;// Offset:  320 Size:    64
//   float3 camera_position;            // Offset:  384 Size:    12
//   float camera_distance_from_origin; // Offset:  396 Size:     4 [unused]
//   float3 camera_at;                  // Offset:  400 Size:    12 [unused]
//   float camera_near_z;               // Offset:  412 Size:     4 [unused]
//   float3 camera_up;                  // Offset:  416 Size:    12 [unused]
//   float camera_far_z;                // Offset:  428 Size:     4 [unused]
//   float3 camera_right;               // Offset:  432 Size:    12 [unused]
//   float camera_fov;                  // Offset:  444 Size:     4 [unused]
//   float3 camera_front;               // Offset:  448 Size:    12 [unused]
//   float camera_aspect;               // Offset:  460 Size:     4 [unused]
//   float camera_width;                // Offset:  464 Size:     4 [unused]
//   float camera_height;               // Offset:  468 Size:     4 [unused]
//   float2 camera_padding;             // Offset:  472 Size:     8 [unused]
//
// }
//
// cbuffer DirectionalLightCB
// {
//
//   float3 d_light_direction;          // Offset:    0 Size:    12
//   float d_light_intensity;           // Offset:   12 Size:     4 [unused]
//   float4 d_light_color;              // Offset:   16 Size:    16
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// defaultSampler                    sampler      NA          NA             s0      1 
// texture_depth                     texture  float4          2d             t0      1 
// texture_base_color                texture  float4          2d            t20      1 
// texture_normal                    texture  float4          2d            t21      1 
// texture_mro                       texture  float4          2d            t30      1 
// CameraCB                          cbuffer      NA          NA            cb1      1 
// DirectionalLightCB                cbuffer      NA          NA            cb4      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// TEXCOORD                 0   xy          1     NONE   float   xy  
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB1[25], immediateIndexed
dcl_constantbuffer CB4[2], immediateIndexed
dcl_sampler s0, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t20
dcl_resource_texture2d (float,float,float,float) t21
dcl_resource_texture2d (float,float,float,float) t30
dcl_input_ps linear v1.xy
dcl_output o0.xyzw
dcl_temps 7
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.texcoord0.x; v1.y <- pin.texcoord0.y; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 14 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
sample_indexable(texture2d)(float,float,float,float) r0.xyzw, v1.xyxx, t20.xyzw, s0  // r0.x <- albedo.x; r0.y <- albedo.y; r0.z <- albedo.z
mov r0.w, r0.w  // r0.w <- albedo.w

#line 15
sample_indexable(texture2d)(float,float,float,float) r1.xyz, v1.xyxx, t21.xyzw, s0
mov r1.xyz, r1.xyzx  // r1.x <- normal_map.x; r1.y <- normal_map.y; r1.z <- normal_map.z

#line 16
sample_indexable(texture2d)(float,float,float,float) r1.w, v1.xyxx, t30.yzwx, s0  // r1.w <- metalness

#line 17
sample_indexable(texture2d)(float,float,float,float) r2.x, v1.xyxx, t30.yxzw, s0  // r2.x <- roughness

#line 19
sample_indexable(texture2d)(float,float,float,float) r3.z, v1.xyxx, t0.yzxw, s0  // r3.z <- depth

#line 24
nop 

#line 140 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
nop 

#line 111
mov r2.y, l(0.960000)  // r2.y <- one_minus_dielectric_spec

#line 112
mul r2.z, r1.w, r2.y
mov r2.z, -r2.z
add r2.y, r2.z, r2.y  // r2.y <- <OneMinusReflectivityMetallic return value>

#line 140
mov r2.y, r2.y  // r2.y <- one_minus_reflectivity

#line 142
mul r2.yzw, r0.xxyz, r2.yyyy  // r2.y <- brdf_diffuse.x; r2.z <- brdf_diffuse.y; r2.w <- brdf_diffuse.z

#line 143
mov r4.xyz, l(0.040000,0.040000,0.040000,0)
mov r5.xyz, -r4.xyzx
add r0.xyz, r0.xyzx, r5.xyzx
mul r0.xyz, r0.xyzx, r1.wwww
add r0.xyz, r0.xyzx, r4.xyzx  // r0.x <- brdf_specular.x; r0.y <- brdf_specular.y; r0.z <- brdf_specular.z

#line 145
nop 

#line 128
nop 

#line 27
mul r1.w, r2.x, r2.x  // r1.w <- <PerceptualRoughnessToRoughness return value>

#line 128
max r1.w, r1.w, l(0.007812)  // r1.w <- out_brdf_data.roughness

#line 129
mul r2.x, r1.w, r1.w
max r2.x, r2.x, l(0.000061)  // r2.x <- out_brdf_data.roughness2

#line 130
nop 

#line 131
mul r1.w, r1.w, l(4.000000)
add r1.w, r1.w, l(2.000000)  // r1.w <- out_brdf_data.normalization_term

#line 132
mov r4.x, l(-1.000000)
add r4.x, r2.x, r4.x  // r4.x <- out_brdf_data.roughness2_minus_one

#line 29 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
nop 

#line 32
nop 
mov r5.xy, v1.xyxx

#line 122 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
mov r5.z, -r5.y  // r5.z <- texcoord.y

#line 123
mul r4.yz, r5.xxzx, l(0.000000, 2.000000, 2.000000, 0.000000)
mov r5.xy, l(-1.000000,1.000000,-0.000000,-0.000000)
add r3.xy, r4.yzyy, r5.xyxx  // r3.x <- pos_xy.x; r3.y <- pos_xy.y

#line 124
mov r3.w, l(1.000000)
mov r3.xyzw, r3.xyzw  // r3.x <- projected_position.x; r3.y <- projected_position.y; r3.z <- projected_position.z; r3.w <- projected_position.w

#line 126
mul r5.xyzw, r3.xxxx, cb1[20].xyzw
mul r6.xyzw, r3.yyyy, cb1[21].xyzw
add r5.xyzw, r5.xyzw, r6.xyzw
mul r6.xyzw, r3.zzzz, cb1[22].xyzw
add r5.xyzw, r5.xyzw, r6.xyzw
mul r3.xyzw, r3.wwww, cb1[23].xyzw
add r3.xyzw, r3.xyzw, r5.xyzw  // r3.x <- position.x; r3.y <- position.y; r3.z <- position.z; r3.w <- position.w

#line 128
div r3.xyz, r3.xyzx, r3.wwww  // r3.x <- <DepthToWPosition return value>.x; r3.y <- <DepthToWPosition return value>.y; r3.z <- <DepthToWPosition return value>.z

#line 32 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r3.xyz, r3.xyzx  // r3.x <- pow_ws.x; r3.y <- pow_ws.y; r3.z <- pow_ws.z

#line 33
mul r1.xyz, r1.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000)
mov r4.yzw, l(-0.000000,-1.000000,-1.000000,-1.000000)
add r1.xyz, r1.xyzx, r4.yzwy
dp3 r3.w, r1.xyzx, r1.xyzx
rsq r3.w, r3.w
mul r1.xyz, r1.xyzx, r3.wwww  // r1.x <- normal_ws.x; r1.y <- normal_ws.y; r1.z <- normal_ws.z

#line 34
mov r3.xyz, -r3.xyzx
add r3.xyz, r3.xyzx, cb1[24].xyzx  // r3.x <- view_direction_ws.x; r3.y <- view_direction_ws.y; r3.z <- view_direction_ws.z

#line 37
nop 

#line 277 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
nop 
mul r3.w, l(1.000000), l(1.000000)

#line 257
mov r4.yzw, -cb4[0].xxyz
dp3 r4.y, r1.xyzx, r4.yzwy
max r4.y, r4.y, l(0.000000)
min r4.y, r4.y, l(1.000000)  // r4.y <- NdotL

#line 262
mul r3.w, r3.w, r4.y
mul r4.yzw, r3.wwww, cb4[1].xxyz  // r4.y <- radiance.x; r4.z <- radiance.y; r4.w <- radiance.z

#line 264
mov r2.yzw, r2.yyzw  // r2.y <- brdf.x; r2.z <- brdf.y; r2.w <- brdf.z

#line 266
nop 

#line 152
nop 
add r3.xyz, r3.xyzx, cb4[0].xyzx

#line 55 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
dp3 r3.w, r3.xyzx, r3.xyzx
max r3.w, r3.w, l(0.000000)  // r3.w <- dp3

#line 56
rsq r3.w, r3.w
mul r3.xyz, r3.wwww, r3.xyzx  // r3.x <- <SafeNormalize return value>.x; r3.y <- <SafeNormalize return value>.y; r3.z <- <SafeNormalize return value>.z

#line 152 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
mov r3.xyz, r3.xyzx  // r3.x <- half_dir.x; r3.y <- half_dir.y; r3.z <- half_dir.z

#line 154
dp3 r1.x, r1.xyzx, r3.xyzx
max r1.x, r1.x, l(0.000000)
min r1.x, r1.x, l(1.000000)  // r1.x <- NoH

#line 155
dp3 r1.y, cb4[0].xyzx, r3.xyzx
max r1.y, r1.y, l(0.000000)
min r1.y, r1.y, l(1.000000)  // r1.y <- LoH

#line 167
mul r1.x, r1.x, r1.x
mul r1.x, r4.x, r1.x
add r1.x, r1.x, l(1.000010)  // r1.x <- d

#line 169
mul r1.y, r1.y, r1.y  // r1.y <- LoH2

#line 170
mul r1.x, r1.x, r1.x
mov r1.z, l(0.100000)
max r1.y, r1.y, r1.z
mul r1.x, r1.y, r1.x
mul r1.x, r1.w, r1.x
div r1.x, r2.x, r1.x  // r1.x <- specular_term

#line 172
mov r1.x, r1.x  // r1.x <- <DirectBRDFSpecular return value>

#line 266
mul r0.xyz, r0.xyzx, r1.xxxx
add r0.xyz, r0.xyzx, r2.yzwy  // r0.x <- brdf.x; r0.y <- brdf.y; r0.z <- brdf.z

#line 268
mul r0.xyz, r4.yzwy, r0.xyzx  // r0.x <- <LightingPhysicallyBased return value>.x; r0.y <- <LightingPhysicallyBased return value>.y; r0.z <- <LightingPhysicallyBased return value>.z

#line 277
mov r0.xyz, r0.xyzx  // r0.x <- <LightingPhysicallyBased return value>.x; r0.y <- <LightingPhysicallyBased return value>.y; r0.z <- <LightingPhysicallyBased return value>.z

#line 37 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r0.xyz, r0.xyzx  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z

#line 42
mov o0.xyz, r0.xyzx
mov o0.w, r0.w
ret 
// Approximately 100 instruction slots used
