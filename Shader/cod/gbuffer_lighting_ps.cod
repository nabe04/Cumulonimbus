//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer CameraCB
// {
//
//   float4x4 camera_view_matrix;       // Offset:    0 Size:    64 [unused]
//   float4x4 camera_projection_matrix; // Offset:   64 Size:    64 [unused]
//   float4x4 camera_view_projection_matrix;// Offset:  128 Size:    64 [unused]
//   float4x4 camera_inv_view_matrix;   // Offset:  192 Size:    64 [unused]
//   float4x4 camera_inv_projection_matrix;// Offset:  256 Size:    64 [unused]
//   float4x4 camera_inv_view_projection_matrix;// Offset:  320 Size:    64
//   float3 camera_position;            // Offset:  384 Size:    12
//   float camera_distance_from_origin; // Offset:  396 Size:     4 [unused]
//   float3 camera_at;                  // Offset:  400 Size:    12 [unused]
//   float camera_near_z;               // Offset:  412 Size:     4 [unused]
//   float3 camera_up;                  // Offset:  416 Size:    12 [unused]
//   float camera_far_z;                // Offset:  428 Size:     4 [unused]
//   float3 camera_right;               // Offset:  432 Size:    12 [unused]
//   float camera_fov;                  // Offset:  444 Size:     4 [unused]
//   float3 camera_front;               // Offset:  448 Size:    12 [unused]
//   float camera_aspect;               // Offset:  460 Size:     4 [unused]
//   float camera_width;                // Offset:  464 Size:     4 [unused]
//   float camera_height;               // Offset:  468 Size:     4 [unused]
//   float2 camera_padding;             // Offset:  472 Size:     8 [unused]
//
// }
//
// cbuffer DirectionalLightCB
// {
//
//   float3 d_light_direction;          // Offset:    0 Size:    12
//   float d_light_intensity;           // Offset:   12 Size:     4 [unused]
//   float4 d_light_color;              // Offset:   16 Size:    16
//
// }
//
// cbuffer PointLightsCB
// {
//
//   struct PointLight
//   {
//       
//       float3 p_light_position;       // Offset:    0
//       float p_light_intensity;       // Offset:   12
//       float3 p_light_color;          // Offset:   16
//       float p_light_range;           // Offset:   28
//
//   } point_lights[500];               // Offset:    0 Size: 16000
//
// }
//
// cbuffer SpotLightsCB
// {
//
//   struct SpotLight
//   {
//       
//       float3 s_light_direction;      // Offset:    0
//       float s_light_intensity;       // Offset:   12
//       float3 s_light_position;       // Offset:   16
//       float s_light_range;           // Offset:   28
//       float4 s_light_color;          // Offset:   32
//       float s_light_inner_cone;      // Offset:   48
//       float s_light_outer_cone;      // Offset:   52
//       float2 s_light_dummy;          // Offset:   56
//
//   } spot_lights[500];                // Offset:    0 Size: 32000
//
// }
//
// cbuffer LightInfoCB
// {
//
//   uint p_light_count;                // Offset:    0 Size:     4
//   uint s_light_count;                // Offset:    4 Size:     4
//   float2 light_info_dummy;           // Offset:    8 Size:     8 [unused]
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// default_sampler                   sampler      NA          NA             s0      1 
// texture_depth                     texture  float4          2d             t0      1 
// texture_base_color                texture  float4          2d            t20      1 
// texture_normal                    texture  float4          2d            t21      1 
// texture_mro                       texture  float4          2d            t30      1 
// CameraCB                          cbuffer      NA          NA            cb1      1 
// DirectionalLightCB                cbuffer      NA          NA            cb4      1 
// PointLightsCB                     cbuffer      NA          NA            cb5      1 
// SpotLightsCB                      cbuffer      NA          NA            cb6      1 
// LightInfoCB                       cbuffer      NA          NA           cb10      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// TEXCOORD                 0   xy          1     NONE   float   xy  
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB1[25], immediateIndexed
dcl_constantbuffer CB4[2], immediateIndexed
dcl_constantbuffer CB5[1000], dynamicIndexed
dcl_constantbuffer CB6[2000], dynamicIndexed
dcl_constantbuffer CB10[1], immediateIndexed
dcl_sampler s0, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t20
dcl_resource_texture2d (float,float,float,float) t21
dcl_resource_texture2d (float,float,float,float) t30
dcl_input_ps linear v1.xy
dcl_output o0.xyzw
dcl_temps 12
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.texcoord0.x; v1.y <- pin.texcoord0.y; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 11 "D:\Desktop\Cumulonimbus\Source\Engine\cbuffer_lights.h"
mov r0.x, l(500)  // r0.x <- MAX_POINT_LIGHT

#line 12
mov r0.y, l(500)  // r0.y <- MAX_SPOT_LIGHT

#line 14 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
sample_indexable(texture2d)(float,float,float,float) r1.xyzw, v1.xyxx, t20.xyzw, s0  // r1.x <- albedo.x; r1.y <- albedo.y; r1.z <- albedo.z
mov r1.w, r1.w  // r1.w <- albedo.w

#line 15
sample_indexable(texture2d)(float,float,float,float) r2.xyz, v1.xyxx, t21.xyzw, s0
mov r2.xyz, r2.xyzx  // r2.x <- normal_map.x; r2.y <- normal_map.y; r2.z <- normal_map.z

#line 16
sample_indexable(texture2d)(float,float,float,float) r0.z, v1.xyxx, t30.yzxw, s0  // r0.z <- metalness

#line 17
sample_indexable(texture2d)(float,float,float,float) r0.w, v1.xyxx, t30.xzwy, s0  // r0.w <- roughness

#line 19
sample_indexable(texture2d)(float,float,float,float) r3.z, v1.xyxx, t0.yzxw, s0  // r3.z <- depth

#line 24
nop 

#line 140 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
nop 

#line 111
mov r2.w, l(0.960000)  // r2.w <- one_minus_dielectric_spec

#line 112
mul r4.x, r0.z, r2.w
mov r4.x, -r4.x
add r2.w, r2.w, r4.x  // r2.w <- <OneMinusReflectivityMetallic return value>

#line 140
mov r2.w, r2.w  // r2.w <- one_minus_reflectivity

#line 142
mul r4.xyz, r1.xyzx, r2.wwww  // r4.x <- brdf_diffuse.x; r4.y <- brdf_diffuse.y; r4.z <- brdf_diffuse.z

#line 143
mov r5.xyz, l(0.040000,0.040000,0.040000,0)
mov r6.xyz, -r5.xyzx
add r1.xyz, r1.xyzx, r6.xyzx
mul r1.xyz, r0.zzzz, r1.xyzx
add r1.xyz, r1.xyzx, r5.xyzx  // r1.x <- brdf_specular.x; r1.y <- brdf_specular.y; r1.z <- brdf_specular.z

#line 145
nop 

#line 128
nop 

#line 27
mul r0.z, r0.w, r0.w  // r0.z <- <PerceptualRoughnessToRoughness return value>

#line 128
max r0.z, r0.z, l(0.007812)  // r0.z <- out_brdf_data.roughness

#line 129
mul r0.w, r0.z, r0.z
max r0.w, r0.w, l(0.000061)  // r0.w <- out_brdf_data.roughness2

#line 130
nop 

#line 131
mul r0.z, r0.z, l(4.000000)
add r0.z, r0.z, l(2.000000)  // r0.z <- out_brdf_data.normalization_term

#line 132
mov r2.w, l(-1.000000)
add r2.w, r0.w, r2.w  // r2.w <- out_brdf_data.roughness2_minus_one

#line 29 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
nop 

#line 32
nop 
mov r5.xy, v1.xyxx

#line 186 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
mov r5.z, -r5.y  // r5.z <- texcoord.y

#line 187
mul r5.xy, r5.xzxx, l(2.000000, 2.000000, 0.000000, 0.000000)
mov r5.zw, l(-0.000000,-0.000000,-1.000000,1.000000)
add r3.xy, r5.zwzz, r5.xyxx  // r3.x <- pos_xy.x; r3.y <- pos_xy.y

#line 188
mov r3.w, l(1.000000)
mov r3.xyzw, r3.xyzw  // r3.x <- projected_position.x; r3.y <- projected_position.y; r3.z <- projected_position.z; r3.w <- projected_position.w

#line 190
mul r5.xyzw, r3.xxxx, cb1[20].xyzw
mul r6.xyzw, r3.yyyy, cb1[21].xyzw
add r5.xyzw, r5.xyzw, r6.xyzw
mul r6.xyzw, r3.zzzz, cb1[22].xyzw
add r5.xyzw, r5.xyzw, r6.xyzw
mul r3.xyzw, r3.wwww, cb1[23].xyzw
add r3.xyzw, r3.xyzw, r5.xyzw  // r3.x <- position.x; r3.y <- position.y; r3.z <- position.z; r3.w <- position.w

#line 192
div r3.xyz, r3.xyzx, r3.wwww  // r3.x <- <DepthToWPosition return value>.x; r3.y <- <DepthToWPosition return value>.y; r3.z <- <DepthToWPosition return value>.z

#line 32 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r3.xyz, r3.xyzx  // r3.x <- position_ws.x; r3.y <- position_ws.y; r3.z <- position_ws.z

#line 33
mul r2.xyz, r2.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000)
mov r5.xyz, l(-1.000000,-1.000000,-1.000000,-0.000000)
add r2.xyz, r2.xyzx, r5.xyzx
dp3 r3.w, r2.xyzx, r2.xyzx
rsq r3.w, r3.w
mul r2.xyz, r2.xyzx, r3.wwww  // r2.x <- normal_ws.x; r2.y <- normal_ws.y; r2.z <- normal_ws.z

#line 34
mov r5.xyz, -r3.xyzx
add r5.xyz, r5.xyzx, cb1[24].xyzx  // r5.x <- view_direction_ws.x; r5.y <- view_direction_ws.y; r5.z <- view_direction_ws.z

#line 37
nop 

#line 275 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
nop 
mul r3.w, l(1.000000), l(1.000000)

#line 255
mov r6.xyz, -cb4[0].xyzx
dp3 r4.w, r2.xyzx, r6.xyzx
max r4.w, r4.w, l(0.000000)
min r4.w, r4.w, l(1.000000)  // r4.w <- NdotL

#line 260
mul r3.w, r3.w, r4.w
mul r6.xyz, r3.wwww, cb4[1].xyzx  // r6.x <- radiance.x; r6.y <- radiance.y; r6.z <- radiance.z

#line 262
mov r4.xyz, r4.xyzx  // r4.x <- brdf.x; r4.y <- brdf.y; r4.z <- brdf.z

#line 264
nop 

#line 152
nop 
add r7.xyz, r5.xyzx, cb4[0].xyzx

#line 89 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
dp3 r3.w, r7.xyzx, r7.xyzx
max r3.w, r3.w, l(0.000000)  // r3.w <- dp3

#line 90
rsq r3.w, r3.w
mul r7.xyz, r3.wwww, r7.xyzx  // r7.x <- <SafeNormalize return value>.x; r7.y <- <SafeNormalize return value>.y; r7.z <- <SafeNormalize return value>.z

#line 152 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
mov r7.xyz, r7.xyzx  // r7.x <- half_dir.x; r7.y <- half_dir.y; r7.z <- half_dir.z

#line 154
dp3 r3.w, r2.xyzx, r7.xyzx
max r3.w, r3.w, l(0.000000)
min r3.w, r3.w, l(1.000000)  // r3.w <- NoH

#line 155
dp3 r4.w, cb4[0].xyzx, r7.xyzx
max r4.w, r4.w, l(0.000000)
min r4.w, r4.w, l(1.000000)  // r4.w <- LoH

#line 167
mul r3.w, r3.w, r3.w
mul r3.w, r2.w, r3.w
add r3.w, r3.w, l(1.000010)  // r3.w <- d

#line 169
mul r4.w, r4.w, r4.w  // r4.w <- LoH2

#line 170
mul r3.w, r3.w, r3.w
mov r5.w, l(0.100000)
max r4.w, r4.w, r5.w
mul r3.w, r3.w, r4.w
mul r3.w, r0.z, r3.w
div r3.w, r0.w, r3.w  // r3.w <- specular_term

#line 172
mov r3.w, r3.w  // r3.w <- <DirectBRDFSpecular return value>

#line 264
mul r7.xyz, r1.xyzx, r3.wwww
add r7.xyz, r4.xyzx, r7.xyzx  // r7.x <- brdf.x; r7.y <- brdf.y; r7.z <- brdf.z

#line 266
mul r6.xyz, r6.xyzx, r7.xyzx  // r6.x <- <LightingPhysicallyBased return value>.x; r6.y <- <LightingPhysicallyBased return value>.y; r6.z <- <LightingPhysicallyBased return value>.z

#line 275
mov r6.xyz, r6.xyzx  // r6.x <- <LightingPhysicallyBased return value>.x; r6.y <- <LightingPhysicallyBased return value>.y; r6.z <- <LightingPhysicallyBased return value>.z

#line 37 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r6.xyz, r6.xyzx  // r6.x <- color.x; r6.y <- color.y; r6.z <- color.z

#line 43
mov r3.w, l(0)  // r3.w <- point_light_index
mov r7.xyz, r6.xyzx  // r7.x <- color.x; r7.y <- color.y; r7.z <- color.z
mov r4.w, r3.w  // r4.w <- point_light_index
loop 
  ult r5.w, r4.w, cb10[0].x
  breakc_z r5.w

#line 45
  nop 

#line 187 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
  mov r8.xyz, l(1.000000,1.000000,1.000000,0)  // r8.x <- light.color.x; r8.y <- light.color.y; r8.z <- light.color.z

#line 188
  mov r9.xyz, r2.xyzx  // r9.x <- light.direction.x; r9.y <- light.direction.y; r9.z <- light.direction.z

#line 189
  mov r5.w, l(1.000000)  // r5.w <- light.distance_attenuation

#line 192
  mov r6.w, r0.x
  ult r6.w, r4.w, r6.w
  if_nz r6.w

#line 194
    imul null, r6.w, r4.w, l(2)
    mov r10.xyz, -cb5[r6.w + 0].xyzx
    add r10.xyz, r3.xyzx, r10.xyzx  // r10.x <- PL.x; r10.y <- PL.y; r10.z <- PL.z

#line 195
    dp3 r6.w, r10.xyzx, r10.xyzx
    sqrt r6.w, r6.w  // r6.w <- d

#line 196
    imul null, r7.w, r4.w, l(2)
    mov r7.w, cb5[r7.w + 1].w  // r7.w <- r

#line 199
    ge r8.w, r7.w, r6.w
    if_nz r8.w

#line 201
      imul null, r8.w, r4.w, l(2)
      mov r8.xyz, cb5[r8.w + 1].xyzx

#line 202
      mov r9.xyz, -r2.xyzx

#line 203
      div r6.w, r6.w, r7.w
      mov r6.w, -r6.w
      add r6.w, r6.w, l(1.000000)
      max r6.w, r6.w, l(0.000000)
      min r5.w, r6.w, l(1.000000)

#line 204
    endif 

#line 205
  endif 

#line 46 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
  nop 

#line 275 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
  nop 
  mul r5.w, r5.w, l(1.000000)

#line 255
  mov r10.xyz, -r9.xyzx
  dp3 r6.w, r2.xyzx, r10.xyzx
  max r6.w, r6.w, l(0.000000)
  min r6.w, r6.w, l(1.000000)  // r6.w <- NdotL

#line 260
  mul r5.w, r5.w, r6.w
  mul r8.xyz, r5.wwww, r8.xyzx  // r8.x <- radiance.x; r8.y <- radiance.y; r8.z <- radiance.z

#line 262
  mov r10.xyz, r4.xyzx  // r10.x <- brdf.x; r10.y <- brdf.y; r10.z <- brdf.z

#line 264
  nop 

#line 152
  nop 
  add r11.xyz, r5.xyzx, r9.xyzx

#line 89 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
  dp3 r5.w, r11.xyzx, r11.xyzx
  max r5.w, r5.w, l(0.000000)  // r5.w <- dp3

#line 90
  rsq r5.w, r5.w
  mul r11.xyz, r5.wwww, r11.xyzx  // r11.x <- <SafeNormalize return value>.x; r11.y <- <SafeNormalize return value>.y; r11.z <- <SafeNormalize return value>.z

#line 152 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
  mov r11.xyz, r11.xyzx  // r11.x <- half_dir.x; r11.y <- half_dir.y; r11.z <- half_dir.z

#line 154
  dp3 r5.w, r2.xyzx, r11.xyzx
  max r5.w, r5.w, l(0.000000)
  min r5.w, r5.w, l(1.000000)  // r5.w <- NoH

#line 155
  dp3 r6.w, r9.xyzx, r11.xyzx
  max r6.w, r6.w, l(0.000000)
  min r6.w, r6.w, l(1.000000)  // r6.w <- LoH

#line 167
  mul r5.w, r5.w, r5.w
  mul r5.w, r2.w, r5.w
  add r5.w, r5.w, l(1.000010)  // r5.w <- d

#line 169
  mul r6.w, r6.w, r6.w  // r6.w <- LoH2

#line 170
  mul r5.w, r5.w, r5.w
  mov r7.w, l(0.100000)
  max r6.w, r6.w, r7.w
  mul r5.w, r5.w, r6.w
  mul r5.w, r0.z, r5.w
  div r5.w, r0.w, r5.w  // r5.w <- specular_term

#line 172
  mov r5.w, r5.w  // r5.w <- <DirectBRDFSpecular return value>

#line 264
  mul r9.xyz, r1.xyzx, r5.wwww
  add r9.xyz, r9.xyzx, r10.xyzx  // r9.x <- brdf.x; r9.y <- brdf.y; r9.z <- brdf.z

#line 266
  mul r8.xyz, r8.xyzx, r9.xyzx  // r8.x <- <LightingPhysicallyBased return value>.x; r8.y <- <LightingPhysicallyBased return value>.y; r8.z <- <LightingPhysicallyBased return value>.z

#line 275
  mov r8.xyz, r8.xyzx  // r8.x <- <LightingPhysicallyBased return value>.x; r8.y <- <LightingPhysicallyBased return value>.y; r8.z <- <LightingPhysicallyBased return value>.z

#line 46 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
  add r7.xyz, r7.xyzx, r8.xyzx

#line 50
  iadd r4.w, r4.w, l(1)
endloop 

#line 53
mov r0.x, l(0)  // r0.x <- spot_light_index
mov r6.xyz, r7.xyzx  // r6.x <- color.x; r6.y <- color.y; r6.z <- color.z
mov r3.w, r0.x  // r3.w <- spot_light_index
loop 
  ult r4.w, r3.w, cb10[0].y
  breakc_z r4.w

#line 55
  nop 

#line 213 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
  mov r8.xyz, l(1.000000,1.000000,1.000000,0)  // r8.x <- light.color.x; r8.y <- light.color.y; r8.z <- light.color.z

#line 214
  mov r9.xyz, r2.xyzx  // r9.x <- light.direction.x; r9.y <- light.direction.y; r9.z <- light.direction.z

#line 215
  mov r4.w, l(1.000000)  // r4.w <- light.distance_attenuation

#line 218
  mov r5.w, r0.y
  ult r5.w, r3.w, r5.w
  if_nz r5.w

#line 220
    imul null, r5.w, r3.w, l(4)
    mov r10.xyz, -cb6[r5.w + 1].xyzx
    add r10.xyz, r3.xyzx, r10.xyzx  // r10.x <- SL.x; r10.y <- SL.y; r10.z <- SL.z

#line 221
    dp3 r5.w, r10.xyzx, r10.xyzx
    sqrt r5.w, r5.w  // r5.w <- d

#line 222
    imul null, r6.w, r3.w, l(4)
    mov r6.w, cb6[r6.w + 1].w  // r6.w <- r

#line 225
    ge r7.w, r6.w, r5.w
    if_nz r7.w

#line 228
      imul null, r7.w, r3.w, l(4)
      dp3 r8.w, cb6[r7.w + 0].xyzx, cb6[r7.w + 0].xyzx
      rsq r8.w, r8.w
      mul r11.xyz, r8.wwww, cb6[r7.w + 0].xyzx  // r11.x <- s_front.x; r11.y <- s_front.y; r11.z <- s_front.z

#line 230
      div r5.w, r5.w, r6.w
      mov r5.w, -r5.w
      add r5.w, r5.w, l(1.000000)
      max r5.w, r5.w, l(0.000000)
      min r5.w, r5.w, l(1.000000)  // r5.w <- influence

#line 231
      dp3 r6.w, r10.xyzx, r10.xyzx
      rsq r6.w, r6.w
      mul r10.xyz, r6.wwww, r10.xyzx

#line 232
      dp3 r6.w, r10.xyzx, r11.xyzx
      max r6.w, r6.w, l(0.000000)  // r6.w <- angle

#line 233
      imul null, r7.w, r3.w, l(4)
      imul null, r8.w, r3.w, l(4)
      mov r8.w, -cb6[r8.w + 3].y
      add r7.w, r8.w, cb6[r7.w + 3].x  // r7.w <- area

#line 234
      imul null, r8.w, r3.w, l(4)
      mov r6.w, -r6.w
      add r6.w, r6.w, cb6[r8.w + 3].x  // r6.w <- influence2

#line 235
      div r6.w, r6.w, r7.w
      mov r6.w, -r6.w
      add r6.w, r6.w, l(1.000000)
      max r6.w, r6.w, l(0.000000)
      min r6.w, r6.w, l(1.000000)  // r6.w <- influence2

#line 237
      mul r4.w, r5.w, r6.w

#line 238
      imul null, r5.w, r3.w, l(4)
      mov r8.xyz, cb6[r5.w + 2].xyzx

#line 239
      imul null, r5.w, r3.w, l(4)
      mov r9.xyz, -cb6[r5.w + 0].xyzx

#line 240
    endif 

#line 241
  endif 

#line 56 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
  nop 

#line 275 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
  nop 
  mul r4.w, r4.w, l(1.000000)

#line 255
  mov r10.xyz, -r9.xyzx
  dp3 r5.w, r2.xyzx, r10.xyzx
  max r5.w, r5.w, l(0.000000)
  min r5.w, r5.w, l(1.000000)  // r5.w <- NdotL

#line 260
  mul r4.w, r4.w, r5.w
  mul r8.xyz, r4.wwww, r8.xyzx  // r8.x <- radiance.x; r8.y <- radiance.y; r8.z <- radiance.z

#line 262
  mov r10.xyz, r4.xyzx  // r10.x <- brdf.x; r10.y <- brdf.y; r10.z <- brdf.z

#line 264
  nop 

#line 152
  nop 
  add r11.xyz, r5.xyzx, r9.xyzx

#line 89 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
  dp3 r4.w, r11.xyzx, r11.xyzx
  max r4.w, r4.w, l(0.000000)  // r4.w <- dp3

#line 90
  rsq r4.w, r4.w
  mul r11.xyz, r4.wwww, r11.xyzx  // r11.x <- <SafeNormalize return value>.x; r11.y <- <SafeNormalize return value>.y; r11.z <- <SafeNormalize return value>.z

#line 152 "D:\Desktop\Cumulonimbus\Shader\lighting_pbr.hlsli"
  mov r11.xyz, r11.xyzx  // r11.x <- half_dir.x; r11.y <- half_dir.y; r11.z <- half_dir.z

#line 154
  dp3 r4.w, r2.xyzx, r11.xyzx
  max r4.w, r4.w, l(0.000000)
  min r4.w, r4.w, l(1.000000)  // r4.w <- NoH

#line 155
  dp3 r5.w, r9.xyzx, r11.xyzx
  max r5.w, r5.w, l(0.000000)
  min r5.w, r5.w, l(1.000000)  // r5.w <- LoH

#line 167
  mul r4.w, r4.w, r4.w
  mul r4.w, r2.w, r4.w
  add r4.w, r4.w, l(1.000010)  // r4.w <- d

#line 169
  mul r5.w, r5.w, r5.w  // r5.w <- LoH2

#line 170
  mul r4.w, r4.w, r4.w
  mov r6.w, l(0.100000)
  max r5.w, r5.w, r6.w
  mul r4.w, r4.w, r5.w
  mul r4.w, r0.z, r4.w
  div r4.w, r0.w, r4.w  // r4.w <- specular_term

#line 172
  mov r4.w, r4.w  // r4.w <- <DirectBRDFSpecular return value>

#line 264
  mul r9.xyz, r1.xyzx, r4.wwww
  add r9.xyz, r9.xyzx, r10.xyzx  // r9.x <- brdf.x; r9.y <- brdf.y; r9.z <- brdf.z

#line 266
  mul r8.xyz, r8.xyzx, r9.xyzx  // r8.x <- <LightingPhysicallyBased return value>.x; r8.y <- <LightingPhysicallyBased return value>.y; r8.z <- <LightingPhysicallyBased return value>.z

#line 275
  mov r8.xyz, r8.xyzx  // r8.x <- <LightingPhysicallyBased return value>.x; r8.y <- <LightingPhysicallyBased return value>.y; r8.z <- <LightingPhysicallyBased return value>.z

#line 56 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
  add r6.xyz, r6.xyzx, r8.xyzx

#line 60
  iadd r3.w, r3.w, l(1)
endloop 

#line 62
mov o0.xyz, r6.xyzx
mov o0.w, r1.w
ret 
// Approximately 273 instruction slots used
