//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer CameraCB
// {
//
//   float4x4 camera_view_matrix;       // Offset:    0 Size:    64 [unused]
//   float4x4 camera_projection_matrix; // Offset:   64 Size:    64 [unused]
//   float4x4 camera_view_projection_matrix;// Offset:  128 Size:    64 [unused]
//   float4x4 camera_inv_view_matrix;   // Offset:  192 Size:    64 [unused]
//   float4x4 camera_inv_projection_matrix;// Offset:  256 Size:    64 [unused]
//   float4x4 camera_inv_view_projection_matrix;// Offset:  320 Size:    64
//   float3 camera_position;            // Offset:  384 Size:    12
//   float camera_distance_from_origin; // Offset:  396 Size:     4 [unused]
//   float3 camera_at;                  // Offset:  400 Size:    12 [unused]
//   float camera_near_z;               // Offset:  412 Size:     4 [unused]
//   float3 camera_up;                  // Offset:  416 Size:    12 [unused]
//   float camera_far_z;                // Offset:  428 Size:     4 [unused]
//   float3 camera_right;               // Offset:  432 Size:    12 [unused]
//   float camera_fov;                  // Offset:  444 Size:     4 [unused]
//   float3 camera_front;               // Offset:  448 Size:    12 [unused]
//   float camera_aspect;               // Offset:  460 Size:     4 [unused]
//   float camera_width;                // Offset:  464 Size:     4 [unused]
//   float camera_height;               // Offset:  468 Size:     4 [unused]
//   float2 camera_padding;             // Offset:  472 Size:     8 [unused]
//
// }
//
// cbuffer LightCB
// {
//
//   float3 light_position;             // Offset:    0 Size:    12 [unused]
//   float orthographic_view_width;     // Offset:   12 Size:     4 [unused]
//   float3 light_direction;            // Offset:   16 Size:    12
//   float orthographic_view_height;    // Offset:   28 Size:     4 [unused]
//   float3 light_color;                // Offset:   32 Size:    12 [unused]
//   float orthographic_near_z;         // Offset:   44 Size:     4 [unused]
//   float orthographic_far_z;          // Offset:   48 Size:     4 [unused]
//   float3 light_padding;              // Offset:   52 Size:    12 [unused]
//   float4x4 light_view_matrix;        // Offset:   64 Size:    64 [unused]
//   float4x4 light_perspective_projection_matrix;// Offset:  128 Size:    64 [unused]
//   float4x4 light_perspective_view_projection_matrix;// Offset:  192 Size:    64 [unused]
//   float4x4 light_orthographic_projection_matrix;// Offset:  256 Size:    64 [unused]
//   float4x4 light_orthographic_view_projection_matrix;// Offset:  320 Size:    64 [unused]
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// defaultSampler                    sampler      NA          NA             s0      1 
// texture_depth                     texture  float4          2d             t0      1 
// texture_base_color                texture  float4          2d            t20      1 
// texture_normal                    texture  float4          2d            t21      1 
// texture_cube                      texture  float4        cube            t29      1 
// texture_mro                       texture  float4          2d            t30      1 
// CameraCB                          cbuffer      NA          NA            cb1      1 
// LightCB                           cbuffer      NA          NA            cb4      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// TEXCOORD                 0   xy          1     NONE   float   xy  
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB1[25], immediateIndexed
dcl_constantbuffer CB4[2], immediateIndexed
dcl_sampler s0, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t20
dcl_resource_texture2d (float,float,float,float) t21
dcl_resource_texturecube (float,float,float,float) t29
dcl_resource_texture2d (float,float,float,float) t30
dcl_input_ps linear v1.xy
dcl_output o0.xyzw
dcl_temps 11
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.texcoord0.x; v1.y <- pin.texcoord0.y; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 1 "D:\Desktop\Cumulonimbus\Shader\params_utility.hlsli"
mov r0.x, l(3.141592)  // r0.x <- PI

#line 2
mov r0.y, l(0.000010)  // r0.y <- Epsilon

#line 7
mov r1.xyz, l(0.040000,0.040000,0.040000,0)  // r1.x <- Fdielectric.x; r1.y <- Fdielectric.y; r1.z <- Fdielectric.z

#line 29 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
sample_indexable(texture2d)(float,float,float,float) r2.xyzw, v1.xyxx, t20.xyzw, s0  // r2.x <- albedo.x; r2.y <- albedo.y; r2.z <- albedo.z; r2.w <- albedo.w

#line 30
sample_indexable(texture2d)(float,float,float,float) r3.xyz, v1.xyxx, t21.xyzw, s0
mov r3.xyz, r3.xyzx  // r3.x <- normal_map.x; r3.y <- normal_map.y; r3.z <- normal_map.z

#line 31
sample_indexable(texture2d)(float,float,float,float) r0.z, v1.xyxx, t30.yzxw, s0
mov r0.z, r0.z  // r0.z <- metalness

#line 32
sample_indexable(texture2d)(float,float,float,float) r0.w, v1.xyxx, t30.xzwy, s0  // r0.w <- roughness

#line 34
sample_indexable(texture2d)(float,float,float,float) r4.z, v1.xyxx, t0.yzxw, s0  // r4.z <- depth

#line 36
nop 
mov r5.xy, v1.xyxx

#line 111 "D:\Desktop\Cumulonimbus\Shader\functions_utility.hlsli"
mov r5.z, -r5.y  // r5.z <- texcoord.y

#line 112
mul r5.xy, r5.xzxx, l(2.000000, 2.000000, 0.000000, 0.000000)
mov r5.zw, l(-0.000000,-0.000000,-1.000000,1.000000)
add r4.xy, r5.zwzz, r5.xyxx  // r4.x <- pos_xy.x; r4.y <- pos_xy.y

#line 113
mov r4.w, l(1.000000)
mov r4.xyzw, r4.xyzw  // r4.x <- projected_position.x; r4.y <- projected_position.y; r4.z <- projected_position.z; r4.w <- projected_position.w

#line 115
mul r5.xyzw, r4.xxxx, cb1[20].xyzw
mul r6.xyzw, r4.yyyy, cb1[21].xyzw
add r5.xyzw, r5.xyzw, r6.xyzw
mul r6.xyzw, r4.zzzz, cb1[22].xyzw
add r5.xyzw, r5.xyzw, r6.xyzw
mul r4.xyzw, r4.wwww, cb1[23].xyzw
add r4.xyzw, r4.xyzw, r5.xyzw  // r4.x <- position.x; r4.y <- position.y; r4.z <- position.z; r4.w <- position.w

#line 117
div r4.xyz, r4.xyzx, r4.wwww  // r4.x <- <DepthToWPosition return value>.x; r4.y <- <DepthToWPosition return value>.y; r4.z <- <DepthToWPosition return value>.z

#line 36 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r4.xyz, r4.xyzx  // r4.x <- w_pos.x; r4.y <- w_pos.y; r4.z <- w_pos.z

#line 39
mov r4.xyz, -r4.xyzx
add r4.xyz, r4.xyzx, cb1[24].xyzx
dp3 r1.w, r4.xyzx, r4.xyzx
rsq r1.w, r1.w
mul r4.xyz, r1.wwww, r4.xyzx  // r4.x <- Lo.x; r4.y <- Lo.y; r4.z <- Lo.z

#line 43
mul r3.xyz, r3.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000)
mov r5.xyz, l(-1.000000,-1.000000,-1.000000,-0.000000)
add r3.xyz, r3.xyzx, r5.xyzx
dp3 r1.w, r3.xyzx, r3.xyzx
rsq r1.w, r1.w
mul r3.xyz, r1.wwww, r3.xyzx  // r3.x <- N.x; r3.y <- N.y; r3.z <- N.z

#line 44
dp3 r1.w, r3.xyzx, r4.xyzx
max r1.w, r1.w, l(0.000000)  // r1.w <- cos_lo

#line 47
mul r3.w, r1.w, l(2.000000)
mul r5.xyz, r3.xyzx, r3.wwww
mov r6.xyz, -r4.xyzx
add r5.xyz, r5.xyzx, r6.xyzx  // r5.x <- Lr.x; r5.y <- Lr.y; r5.z <- Lr.z

#line 50
mov r6.xyz, -r1.xyzx
add r6.xyz, r2.xyzx, r6.xyzx
mul r6.xyz, r0.zzzz, r6.xyzx
add r1.xyz, r1.xyzx, r6.xyzx  // r1.x <- F0.x; r1.y <- F0.y; r1.z <- F0.z

#line 53
mov r6.xyz, l(0,0,0,0)  // r6.x <- direct_lighting.x; r6.y <- direct_lighting.y; r6.z <- direct_lighting.z

#line 55
mov r7.xyz, -cb4[1].xyzx  // r7.x <- Li.x; r7.y <- Li.y; r7.z <- Li.z

#line 57
itof r8.xyz, l(1, 1, 1, 0)  // r8.x <- Lradiance.x; r8.y <- Lradiance.y; r8.z <- Lradiance.z

#line 60
add r9.xyz, r4.xyzx, r7.xyzx
dp3 r3.w, r9.xyzx, r9.xyzx
rsq r3.w, r3.w
mul r9.xyz, r3.wwww, r9.xyzx  // r9.x <- Lh.x; r9.y <- Lh.y; r9.z <- Lh.z

#line 63
dp3 r3.w, r3.xyzx, r7.xyzx
max r3.w, r3.w, l(0.000000)  // r3.w <- cos_li

#line 64
dp3 r3.x, r3.xyzx, r9.xyzx
max r3.x, r3.x, l(0.000000)  // r3.x <- cos_lh

#line 67
nop 
dp3 r3.y, r9.xyzx, r4.xyzx
max r3.y, r3.y, l(0.000000)

#line 112 "D:\Desktop\Cumulonimbus\Shader\functions_lighting.hlsli"
mov r4.xyz, -r1.xyzx
add r4.xyz, r4.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mov r3.y, -r3.y
add r3.y, r3.y, l(1.000000)
mov r3.z, l(1.000000)
mul r3.z, r3.y, r3.z
mul r3.y, r3.y, r3.y
mul r3.y, r3.y, r3.y
mul r3.y, r3.y, r3.z
mul r4.xyz, r3.yyyy, r4.xyzx
add r4.xyz, r1.xyzx, r4.xyzx  // r4.x <- <FresnelSchlick return value>.x; r4.y <- <FresnelSchlick return value>.y; r4.z <- <FresnelSchlick return value>.z

#line 67 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r4.xyz, r4.xyzx  // r4.x <- F.x; r4.y <- F.y; r4.z <- F.z

#line 69
nop 

#line 88 "D:\Desktop\Cumulonimbus\Shader\functions_lighting.hlsli"
mul r3.y, r0.w, r0.w  // r3.y <- alpha

#line 89
mul r3.y, r3.y, r3.y  // r3.y <- alpha_sq

#line 91
mul r3.x, r3.x, r3.x
mov r3.z, l(-1.000000)
add r3.z, r3.z, r3.y
mul r3.x, r3.z, r3.x
add r3.x, r3.x, l(1.000000)  // r3.x <- denom

#line 92
mul r0.x, r0.x, r3.x
mul r0.x, r3.x, r0.x
div r0.x, r3.y, r0.x  // r0.x <- <NdfGGX return value>

#line 69 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r0.x, r0.x  // r0.x <- D

#line 71
nop 

#line 104 "D:\Desktop\Cumulonimbus\Shader\functions_lighting.hlsli"
add r3.x, r0.w, l(1.000000)  // r3.x <- r

#line 105
mul r3.x, r3.x, r3.x
div r3.x, r3.x, l(8.000000)  // r3.x <- k

#line 106
nop 

#line 98
mov r3.y, -r3.x
add r3.y, r3.y, l(1.000000)
mul r3.y, r3.y, r3.w
add r3.y, r3.x, r3.y
div r3.y, r3.w, r3.y  // r3.y <- <GaSchlickG1 return value>

#line 106
nop 

#line 98
mov r3.z, -r3.x
add r3.z, r3.z, l(1.000000)
mul r3.z, r1.w, r3.z
add r3.x, r3.x, r3.z
div r3.x, r1.w, r3.x  // r3.x <- <GaSchlickG1 return value>

#line 106
mul r3.x, r3.x, r3.y  // r3.x <- <GaSchlickGGX return value>

#line 71 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r3.x, r3.x  // r3.x <- G

#line 76
itof r7.xyz, l(1, 1, 1, 0)
mov r9.xyz, -r4.xyzx
add r7.xyz, r7.xyzx, r9.xyzx
itof r9.xyz, l(0, 0, 0, 0)
mov r10.xyz, -r7.xyzx
add r9.xyz, r9.xyzx, r10.xyzx
mul r9.xyz, r0.zzzz, r9.xyzx
add r7.xyz, r7.xyzx, r9.xyzx  // r7.x <- kd.x; r7.y <- kd.y; r7.z <- kd.z

#line 81
mul r7.xyz, r2.xyzx, r7.xyzx  // r7.x <- diffuse_BRDF.x; r7.y <- diffuse_BRDF.y; r7.z <- diffuse_BRDF.z

#line 84
mul r4.xyz, r0.xxxx, r4.xyzx
mul r3.xyz, r3.xxxx, r4.xyzx
mul r0.x, r3.w, l(4.000000)
mul r0.x, r1.w, r0.x
max r0.x, r0.x, r0.y
div r3.xyz, r3.xyzx, r0.xxxx  // r3.x <- specular_BRDF.x; r3.y <- specular_BRDF.y; r3.z <- specular_BRDF.z

#line 87
add r3.xyz, r3.xyzx, r7.xyzx
mul r3.xyz, r8.xyzx, r3.xyzx
mul r3.xyz, r3.wwww, r3.xyzx
add r3.xyz, r3.xyzx, r6.xyzx  // r3.x <- direct_lighting.x; r3.y <- direct_lighting.y; r3.z <- direct_lighting.z

#line 95
itof r4.xyz, l(1, 1, 1, 0)  // r4.x <- irradiance.x; r4.y <- irradiance.y; r4.z <- irradiance.z

#line 101
nop 

#line 112 "D:\Desktop\Cumulonimbus\Shader\functions_lighting.hlsli"
mov r6.xyz, -r1.xyzx
add r6.xyz, r6.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mov r0.x, -r1.w
add r0.x, r0.x, l(1.000000)
mov r0.y, l(1.000000)
mul r0.y, r0.x, r0.y
mul r0.x, r0.x, r0.x
mul r0.x, r0.x, r0.x
mul r0.x, r0.x, r0.y
mul r6.xyz, r0.xxxx, r6.xyzx
add r6.xyz, r1.xyzx, r6.xyzx  // r6.x <- <FresnelSchlick return value>.x; r6.y <- <FresnelSchlick return value>.y; r6.z <- <FresnelSchlick return value>.z

#line 101 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r6.xyz, r6.xyzx  // r6.x <- F.x; r6.y <- F.y; r6.z <- F.z

#line 104
mov r6.xyz, -r6.xyzx
add r6.xyz, r6.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mov r7.xyz, -r6.xyzx
add r7.xyz, r7.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
mul r0.xyz, r0.zzzz, r7.xyzx
add r0.xyz, r0.xyzx, r6.xyzx  // r0.x <- kd.x; r0.y <- kd.y; r0.z <- kd.z

#line 107
mul r0.xyz, r2.xyzx, r0.xyzx
mul r0.xyz, r4.xyzx, r0.xyzx  // r0.x <- diffuseIBL.x; r0.y <- diffuseIBL.y; r0.z <- diffuseIBL.z

#line 110
nop 
nop 

#line 119 "D:\Desktop\Cumulonimbus\Shader\functions_lighting.hlsli"
resinfo_indexable(texturecube)(float,float,float,float)_uint r1.w, l(0), t29.xyzw
mov r1.w, r1.w  // r1.w <- levels

#line 120
mov r1.w, r1.w  // r1.w <- <QuerySpecularTextureLevels return value>

#line 110 "D:\Desktop\Cumulonimbus\Shader\gbuffer_lighting_ps.hlsl"
mov r1.w, r1.w  // r1.w <- specularTextureLevels

#line 111
utof r1.w, r1.w
mul r0.w, r0.w, r1.w
sample_l_indexable(texturecube)(float,float,float,float) r2.xyz, r5.xyzx, t29.xyzw, s0, r0.w
mov r2.xyz, r2.xyzx  // r2.x <- specularIrradiance.x; r2.y <- specularIrradiance.y; r2.z <- specularIrradiance.z

#line 115
itof r4.xy, l(1, 1, 0, 0)  // r4.x <- specularBRDF.x; r4.y <- specularBRDF.y

#line 118
mul r1.xyz, r1.xyzx, r4.xxxx
add r1.xyz, r4.yyyy, r1.xyzx
mul r1.xyz, r2.xyzx, r1.xyzx  // r1.x <- specularIBL.x; r1.y <- specularIBL.y; r1.z <- specularIBL.z

#line 121
add r0.xyz, r0.xyzx, r1.xyzx  // r0.x <- ambientLighting.x; r0.y <- ambientLighting.y; r0.z <- ambientLighting.z

#line 124
add o0.xyz, r0.xyzx, r3.xyzx
mov o0.w, r2.w
ret 
// Approximately 163 instruction slots used
